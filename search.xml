<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo+Github+Vercel部署个人主页、Waline评论搭建、Hexo环境迁移、谷歌百度必应收录</title>
      <link href="/articles/3dc6ba08/"/>
      <url>/articles/3dc6ba08/</url>
      
        <content type="html"><![CDATA[<p><strong><big>写在前面：</big></strong> 本文为避免重复造轮子，仅简单的记录了大致的操作步骤和遇到的一些问题，详细的过程并没有一一写下，方便日后复现。主要包括从零到一建立hexo博客网站，waline的搭建和升级，整体环境迁移到另一台设备，让搜索引擎收录网站等。</p><h1 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h1><!-- TOC --><ul><li><a href="#%E6%A6%82%E8%A7%88">概览</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85">环境安装</a></li><li><a href="#%E5%BB%BA%E7%AB%99">建站</a><ul><li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96">初始化</a></li><li><a href="#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98">安装主题</a></li><li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li></ul></li><li><a href="#%E9%83%A8%E7%BD%B2">部署</a><ul><li><a href="#%E6%96%B9%E5%BC%8F%E4%B8%80hexo-github">方式一Hexo-Github</a></li><li><a href="#%E6%96%B9%E5%BC%8F%E4%BA%8Chexo-vercel">方式二Hexo-vercel</a></li></ul></li><li><a href="#%E6%8F%90%E4%BA%A4%E7%99%BE%E5%BA%A6%E5%BF%85%E5%BA%94%E8%B0%B7%E6%AD%8C%E6%94%B6%E5%BD%95">提交百度/必应/谷歌收录</a></li><li><a href="#waline%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E5%8D%87%E7%BA%A7%E4%B8%BA%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC">waline评论系统,升级为最新版本</a></li><li><a href="#hexo%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5%E6%95%B4%E4%BD%93%E8%BF%81%E7%A7%BB">Hexo个人主页整体迁移</a></li><li><a href="#%E5%8F%82%E8%80%83">参考</a></li></ul><!-- /TOC --><h1 id="环境安装"><a href="#环境安装" class="headerlink" title="环境安装"></a>环境安装</h1><p>本文基于ubuntu22系统搭建环境，安装以下软件：</p><ul><li><code>Node.js</code></li><li><code>git</code></li><li><code>Hexo</code></li></ul><p>网上教程很多，Hexo安装参考下Hexo官方<a href="https://hexo.io/zh-cn/docs/index.html">文档</a><sup>[1]</sup>安装，其中要注意<code>Node.js</code>版本和<code>Hexo</code>版本的匹配问题。选择一套自己中意的<a href="https://hexo.io/themes/">Hexo主题</a>模板，笔者使用的是<a href="http://blinkfox.com/">matery</a>（点击此处预览模板）。  </p><blockquote><p><big>注意: </big>主题最好在最受欢迎的几个中选择，因为使用人数多，遇到什么BUG，在网上也能查到答案。</p></blockquote><h1 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h1><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>软件安装好后开始建站，首先初始化一个文件夹作为你的 &lt;博客目录&gt;，存放网站资源,执行下列命令安装网站所需资源，参考<a href="https://hexo.io/zh-cn/docs/setup">建站</a><sup>[2]</sup>。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo init <span class="token operator">&lt;</span>博客目录<span class="token operator">&gt;</span>$ <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>博客目录<span class="token operator">&gt;</span>$ <span class="token function">npm</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>然后在你的 &lt;博客目录&gt; 下，可以看到如下目录结构：</p><pre class="line-numbers language-none"><code class="language-none">&lt;博客目录&gt;├── _config.yml├── _config.XXX.yml├── package.json├── scaffolds├── source|   ├── _drafts|   └── _posts└── themes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><p>方式一：下载压缩包，<a href="https://codeload.github.com/blinkfox/hexo-theme-matery/zip/master">点击下载</a>。通过此方式只能下载master分支下的稳定版，不是最新版。<br>方式二：git克隆仓库，<code>git clone https://github.com/blinkfox/hexo-theme-matery.git</code>（默认为develop分支）。通过此方式可以下载最新版（develop分支），也可以下载稳定版（master分支）。<br>将下载好的解压缩文件或者克隆的仓库，复制到博客目录下的themes目录下,笔者这里是<code>hexo-theme-matery</code>文件夹，此文件夹下同样有个<code>_config.yml</code>文件，将此文件夹重命名作为备份文件，然后复制此文件夹里的所有内容并粘贴至你的 &lt;博客目录&gt; 下的<code>_config.XXX.yml</code>文件里，并将此文件名中的<code>XXX</code>替换为你的主题文件夹名（<code>hexo-theme-matery</code>）。</p><pre class="line-numbers language-none"><code class="language-none">&lt;博客目录&gt;└── themes    └── hexo-theme-matery        └── _config.yml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>修改&lt;博客目录&gt; 下的<code>_config.yml</code>文件,找到<code>theme</code>项，并将后面的内容改为你的主题文件夹名(<code>hexo-theme-matery</code>)，到此安装完毕。</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Extensions</span><span class="token comment">## Plugins: https://hexo.io/plugins/</span><span class="token comment">## Themes: https://hexo.io/themes/</span><span class="token key atrule">theme</span><span class="token punctuation">:</span> hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>matery <span class="token comment"># 这里改为你的主题文件夹名</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>运行<code>hexo s</code>可以本地预览（ctrl+左键点击命令行的链接<a href="http://localhost:4000/%EF%BC%89">http://localhost:4000/）</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">~/MyWebPage/hexo_matery$ hexo sINFO  Validating configINFO  Start processingINFO  Hexo is running at http://localhost:4000/ <span class="token builtin class-name">.</span> Press Ctrl+C to stop.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>关于hexo的一些命令可以查看<a href="https://hexo.io/zh-cn/docs/commands">指令</a><sup>[5]</sup>。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>参考hexo<a href="https://hexo.io/zh-cn/docs/configuration">配置</a><sup>[3]</sup>文档、matery配置文档(<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">blinkfox</a><sup>[4]</sup>)。关于主题美化可以参考<a href="https://dreamruins.gitee.io/tutorials/2867641146">Ruins</a><sup>[6]</sup>。</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p>部署的方式有很多种，本文使用以下两种方式：</p><h2 id="方式一-Hexo-Github"><a href="#方式一-Hexo-Github" class="headerlink" title="方式一(Hexo-Github)"></a>方式一(Hexo-Github)</h2><p>注册<code>github</code>账号，新建一个<code>github page</code>仓库（这个仓库比较特殊，一个账号只能创建一个，用来存放你的网站文件），注意仓库名的格式必须是：<code>用户名.github.io</code>（不会的请网上搜索）<br><img src="/img/post_img/%E5%BB%BA%E7%AB%99/create-github-page.png" alt="create github page"><br>下图的<code>settings -&gt; Pages -&gt; Build and deploymnet</code>下红色方框中的<code>Source</code>选择<code>Deploy from a branch</code>，再往下的<code>Branch</code>：选择一个分支存放博客网站资源文件，默认分支为<code>main</code>分支，可以更改分支名，或者自己新建一个分支，笔者在这里新建了一个<code>gh-pages</code>分支<br><img src="/img/post_img/%E5%BB%BA%E7%AB%99/deploy-set.png" alt="deploy settings"></p><blockquote><p><big>注意: </big>这里的分支名需与本地的文件夹 &lt;博客目录&gt; 内的<code>_config.yml</code>文件中的<code>deploy:branch: gh-pages</code>配置项中的分支名保持一致；并且该分支下的文件保存目录<code>/(root)</code>与<code>_config.yml</code>文件中的<code>URL</code>配置项中<code>root</code>保持一致，否则在线打开的网站页面将出现乱序，不样式显示</p></blockquote><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># URL</span><span class="token comment">## Set your site url here. For example, if you use GitHub Page, set url as 'https://github.com/用户名/用户名.github.io/your_project'</span><span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/用户名/用户名.github.io<span class="token key atrule">root</span><span class="token punctuation">:</span> /  <span class="token comment"># 表示存在`Branch`分支下的根目录，如果不是存在根目录下，这里的`/`替换成`/your_project/`</span><span class="token comment"># Deployment</span><span class="token comment">## Docs: https://hexo.io/docs/one-command-deployment</span><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/用户名/用户名.github.io  <span class="token comment"># example, https://github.com/hexojs/hexojs.github.io</span>  <span class="token key atrule">branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages <span class="token comment"># 与上面图片中的`Branch`分支名保持一致</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="方式二-Hexo-vercel"><a href="#方式二-Hexo-vercel" class="headerlink" title="方式二(Hexo-vercel)"></a>方式二(Hexo-vercel)</h2><p>登陆vercel，选择从github导入已经建立好的仓库<code>用户名.github.io</code>（也可以导入其他存放Hexo静态文件的仓库），参考<a href="https://blog.csdn.net/qq_17197675/article/details/124025934">罗某23</a><sup>[7]</sup>。<br><img src="/img/post_img/%E5%BB%BA%E7%AB%99/vercel-deploy-settings.png" alt="vercel deploy settings"> </p><blockquote><p><big>注意: </big>图片中的<code>FRAMEWORK PRESET</code>下面选择<code>other</code>，<code>ROOT DIRECTOR</code>选择<code>./</code>（存放在网站根目录，与<code>_config.yml</code>配置文件中的 <code>root: /</code> 保持一致，不容易出错）。<code>Build and Output Settings</code>下的选项默认为都不勾选（由于导入的是github仓库，且仓库里的静态文件在本地就已经构建好了，所以这里无需再次build，保持默认即可），<code>Enviroment Variables</code>默认不填写，最后点击<code>Deploy</code>就部署好了。  </p></blockquote><p>由于vercel国内访问较慢，需要绑定个人域名，才能正常访问。按照下图设置下vercel导入的github分支，分支名要与存储静态网站文件的分支名一致，当每次更新分支时，vercel会同步更新网站页面。<br><img src="/img/post_img/%E5%BB%BA%E7%AB%99/vercel-git-settings.png" alt="vercel git settings"></p><h1 id="提交百度-x2F-必应-x2F-谷歌收录"><a href="#提交百度-x2F-必应-x2F-谷歌收录" class="headerlink" title="提交百度/必应/谷歌收录"></a>提交百度/必应/谷歌收录</h1><p>sitemap推送参考<a href="https://itrhx.blog.csdn.net/article/details/100899489?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-100899489-blog-98593529.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-100899489-blog-98593529.pc_relevant_default&amp;utm_relevant_index=1">Hexo 博客提交百度、谷歌搜索引擎收录</a><sup>[8]</sup>，谷歌站长里面设置好了后，必应站长工具可以直接从google search console中导入。笔者的<code>_config.yml</code>配置如下：  </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># URL</span><span class="token comment">## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'</span><span class="token key atrule">url</span><span class="token punctuation">:</span> 你的网站网址<span class="token key atrule">root</span><span class="token punctuation">:</span> /<span class="token comment"># 站点地图</span><span class="token key atrule">plugins</span><span class="token punctuation">:</span> <span class="token punctuation">-</span> hexo<span class="token punctuation">-</span>generator<span class="token punctuation">-</span>baidu<span class="token punctuation">-</span>sitemap<span class="token punctuation">-</span> hexo<span class="token punctuation">-</span>generator<span class="token punctuation">-</span>sitemap<span class="token key atrule">baidusitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> baidusitemap.xml<span class="token key atrule">sitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> sitemap.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>主动推送参考<a href="https://cjh0613.com/20200603HexoSubmitUrlsToSearchEngine">hexo-submit-urls-to-search-engine 中文文档</a><sup>[9]</sup>。关于<code>Google index API</code>密钥文件（<code>JSON</code>格式）的获取参考<a href="https://developers.google.cn/search/apis/indexing-api/v3/prereqs?hl=zh-cn">Indexing API</a><sup>[10]</sup>、<a href="https://rankmath.com/blog/google-indexing-api/">How You Can Get Google To Crawl Your Website Instantly</a><sup>[11]</sup>。  </p><blockquote><p><big>注意：</big>打开<code>Indexing API</code>官方文档，按提示创建项目、创建服务帐号。只需要按提示在网站进行配置操作即可，不需要完成获取访问令牌等后续操作。</p></blockquote><h1 id="waline评论系统-升级为最新版本"><a href="#waline评论系统-升级为最新版本" class="headerlink" title="waline评论系统,升级为最新版本"></a>waline评论系统,升级为最新版本</h1><h1 id="Hexo个人主页整体迁移"><a href="#Hexo个人主页整体迁移" class="headerlink" title="Hexo个人主页整体迁移"></a>Hexo个人主页整体迁移</h1><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>[1] hexo.文档.(2023-3-25)[2023-4-2].<a href="https://hexo.io/zh-cn/docs/index.html">https://hexo.io/zh-cn/docs/index.html</a>.<br>[2] hexo.建站.(2023-3-25)[2023-4-2].<a href="https://hexo.io/zh-cn/docs/setup">https://hexo.io/zh-cn/docs/setup</a>.<br>[3] hexo.配置.(2023-3-25)[2023-4-2].<a href="https://hexo.io/zh-cn/docs/configuration">https://hexo.io/zh-cn/docs/configuration</a>.<br>[4] blinkfox.hexo-theme-matery.(2022-12-24)[2023-4-2]<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md</a>.<br>[5] hexo.指令.(2023-3-25)[2023-4-2].<a href="https://hexo.io/zh-cn/docs/commands">https://hexo.io/zh-cn/docs/commands</a>.<br>[6] Ruins.Matery主题自定义(三)页面特效.(2022-11-15)[2023-4-5].<a href="https://reamruins.gitee.io/tutorials/2867641146">https://reamruins.gitee.io/tutorials/2867641146</a>.<br>[7] 罗某23.hexo部署到vercel提升访问速度.(2022-4-7)[2023-4-5].<a href="https://blog.csdn.net/qq_17197675/article/details/124025934">https://blog.csdn.net/qq_17197675/article/details/124025934</a>.<br>[8] ITBOB•鲍勃.Hexo 博客提交百度、谷歌搜索引擎收录.(2022-11-26)[2023-4-5].<a href="https://itrhx.blog.csdn.net/article/details/100899489?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-100899489-blog-98593529.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-100899489-blog-98593529.pc_relevant_default&amp;utm_relevant_index=1">https://itrhx.blog.csdn.net/article/details/100899489?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-100899489-blog-98593529.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-100899489-blog-98593529.pc_relevant_default&amp;utm_relevant_index=1</a>.<br>[9] 峡州仙士.hexo-submit-urls-to-search-engine 中文文档.(2021-05-13)[2023-4-5].<a href="https://cjh0613.com/20200603HexoSubmitUrlsToSearchEngine">https://cjh0613.com/20200603HexoSubmitUrlsToSearchEngine</a>.<br>[10] Google Developers.Indexing API.(2023-02-2)[2023-4-5].<a href="https://developers.google.cn/search/apis/indexing-api/v3/prereqs?hl=zh-cn">https://developers.google.cn/search/apis/indexing-api/v3/prereqs?hl=zh-cn</a>.<br>[11] [Rank Math.How You Can Get Google To Crawl Your Website Instantly.[2023-4-5].]<a href="https://rankmath.com/blog/google-indexing-api/">https://rankmath.com/blog/google-indexing-api/</a>.</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 建站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Matery </tag>
            
            <tag> Github </tag>
            
            <tag> Vercel </tag>
            
            <tag> Waline </tag>
            
            <tag> SEO </tag>
            
            <tag> Hexo环境迁移 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
